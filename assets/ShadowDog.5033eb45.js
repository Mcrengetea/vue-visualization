var f=Object.defineProperty;var c=(s,e,i)=>e in s?f(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var t=(s,e,i)=>(c(s,typeof e!="symbol"?e+"":e,i),i);import{d as u,s as w,y as I,x,m as v,i as S}from"./index.9e8c3cbe.js";const _=""+new URL("../image/shadowDog/player.png",import.meta.url).href,k=""+new URL("../image/shadowDog/layer-1.png",import.meta.url).href,F=""+new URL("../image/shadowDog/layer-2.png",import.meta.url).href,G=""+new URL("../image/shadowDog/layer-3.png",import.meta.url).href,D=""+new URL("../image/shadowDog/layer-4.png",import.meta.url).href,M=""+new URL("../image/shadowDog/layer-5.png",import.meta.url).href,N=""+new URL("../image/shadowDog/enemy_fly.png",import.meta.url).href,L=""+new URL("../image/shadowDog/enemy_plant.png",import.meta.url).href,X=""+new URL("../image/shadowDog/enemy_spider_big.png",import.meta.url).href,E=""+new URL("../image/shadowDog/fire.png",import.meta.url).href,T=""+new URL("../image/shadowDog/boom.png",import.meta.url).href,R=""+new URL("../image/shadowDog/heart.png",import.meta.url).href;class l{constructor(e,i,h,r,g){t(this,"game");t(this,"width");t(this,"height");t(this,"speedModifier");t(this,"image");t(this,"x");t(this,"y");this.game=e,this.width=i,this.height=h,this.speedModifier=r,this.image=g,this.x=0,this.y=0}update(){this.x<-this.width?this.x=0:this.x-=this.game.speed*this.speedModifier}draw(e){e.drawImage(this.image,this.x,this.y,this.width,this.height),e.drawImage(this.image,this.x+this.width,this.y,this.width,this.height)}}class A{constructor(e){t(this,"game");t(this,"width");t(this,"height");t(this,"layerImage1");t(this,"layerImage2");t(this,"layerImage3");t(this,"layerImage4");t(this,"layerImage5");t(this,"layer1");t(this,"layer2");t(this,"layer3");t(this,"layer4");t(this,"layer5");t(this,"BackGroundLayers");this.game=e,this.width=1667,this.height=500,this.layerImage1=document.getElementById("layer1"),this.layerImage2=document.getElementById("layer2"),this.layerImage3=document.getElementById("layer3"),this.layerImage4=document.getElementById("layer4"),this.layerImage5=document.getElementById("layer5"),this.layer1=new l(this.game,this.width,this.height,0,this.layerImage1),this.layer2=new l(this.game,this.width,this.height,.2,this.layerImage2),this.layer3=new l(this.game,this.width,this.height,.4,this.layerImage3),this.layer4=new l(this.game,this.width,this.height,.6,this.layerImage4),this.layer5=new l(this.game,this.width,this.height,.8,this.layerImage5),this.BackGroundLayers=[this.layer1,this.layer2,this.layer3,this.layer4,this.layer5]}update(){this.BackGroundLayers.forEach(e=>{e.update()})}draw(e){this.BackGroundLayers.forEach(i=>{i.draw(e)})}}class n{constructor(){t(this,"frameX");t(this,"frameY");t(this,"fps");t(this,"frameInterval");t(this,"frameTimer");t(this,"markedForDeletion");t(this,"x");t(this,"y");t(this,"speedX");t(this,"speedY");t(this,"game");t(this,"maxFrame");t(this,"width");t(this,"height");t(this,"image");this.frameX=0,this.frameY=0,this.fps=20,this.frameInterval=1e3/this.fps,this.frameTimer=0,this.markedForDeletion=!1}update(e){this.x-=this.speedX+this.game.speed,this.y+=this.speedY,this.frameTimer>this.frameInterval?(this.frameTimer=0,this.frameX<this.maxFrame?this.frameX++:this.frameX=0):this.frameTimer+=e,this.x+this.width<0&&(this.markedForDeletion=!0)}draw(e){this.game.debug&&e.strokeRect(this.x,this.y,this.width,this.height),e.drawImage(this.image,this.frameX*this.width,0,this.width,this.height,this.x,this.y,this.width,this.height)}}class U extends n{constructor(i){super();t(this,"angle");t(this,"va");this.game=i,this.width=60,this.height=44,this.x=this.game.width,this.y=Math.random()*this.game.height*.5,this.speedX=Math.random()+1,this.speedY=0,this.maxFrame=5,this.image=document.getElementById("enemy_fly"),this.angle=0,this.va=Math.random()*.1+.1}update(i){super.update(i),this.angle+=this.va,this.y+=Math.sin(this.angle)}}class z extends n{constructor(e){super(),this.game=e,this.width=60,this.height=87,this.x=this.game.width,this.y=this.game.height-this.height-this.game.groundMargin,this.speedX=0,this.speedY=0,this.maxFrame=1,this.image=document.getElementById("enemy_plant")}}class Y extends n{constructor(e){super(),this.game=e,this.width=120,this.height=144,this.x=this.game.width,this.y=Math.random()*this.game.height*.5,this.image=document.getElementById("enemy_spider_big"),this.speedX=0,this.speedY=Math.random()>.5?1:-1,this.maxFrame=5}update(e){super.update(e),this.y>this.game.height-this.height-this.game.groundMargin&&(this.speedY*=-1),this.y<-this.height&&(this.markedForDeletion=!0)}draw(e){super.draw(e),e.beginPath(),e.moveTo(this.x+this.width/2,0),e.lineTo(this.x+this.width/2,this.y),e.stroke()}}class b{constructor(e){t(this,"game");t(this,"keys");this.game=e,this.keys=[],window.addEventListener("keydown",i=>{(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="ArrowLeft"||i.key==="ArrowRight"||i.key==="Enter")&&this.keys.indexOf(i.key)===-1?this.keys.push(i.key):i.key==="d"&&(this.game.debug=!this.game.debug)}),window.addEventListener("keyup",i=>{(i.key==="ArrowDown"||i.key==="ArrowUp"||i.key==="ArrowLeft"||i.key==="ArrowRight"||i.key==="Enter")&&this.keys.splice(this.keys.indexOf(i.key),1)})}}class B{constructor(e,i,h){t(this,"game");t(this,"image");t(this,"spritWidth");t(this,"spritHeight");t(this,"sizeModifier");t(this,"width");t(this,"height");t(this,"x");t(this,"y");t(this,"frameX");t(this,"maxFrame");t(this,"markedForDeletion");t(this,"fps");t(this,"frameInterval");t(this,"frameTimer");this.game=e,this.image=document.getElementById("collisionAnimation"),this.spritWidth=100,this.spritHeight=90,this.sizeModifier=Math.random()+.5,this.width=this.sizeModifier*this.spritWidth,this.height=this.sizeModifier*this.spritHeight,this.x=i-this.width*.5,this.y=h-this.height*.5,this.frameX=0,this.maxFrame=4,this.markedForDeletion=!1,this.fps=Math.random()*10+5,this.frameInterval=1e3/this.fps,this.frameTimer=0}draw(e){e.drawImage(this.image,this.frameX*this.spritWidth,0,this.spritWidth,this.spritHeight,this.x,this.y,this.width,this.height)}update(e){this.x-=this.game.speed,this.frameTimer>this.frameInterval?(this.frameX++,this.frameTimer=0):this.frameTimer+=e,this.frameX>this.maxFrame&&(this.markedForDeletion=!0)}}class O{constructor(e,i,h,r,g){t(this,"value");t(this,"x");t(this,"y");t(this,"targetX");t(this,"targetY");t(this,"markedForDeletion");t(this,"timer");this.value=e,this.x=i,this.y=h,this.targetX=r,this.targetY=g,this.markedForDeletion=!1,this.timer=0}update(){this.x+=(this.targetX-this.x)*.03,this.y+=(this.targetY-this.y)*.03,this.timer++,this.timer>100&&(this.markedForDeletion=!0)}draw(e){e.font="20px Creepster",e.fillStyle="white",e.fillText(this.value,this.x,this.y),e.fillStyle="black",e.fillText(this.value,this.x-2,this.y-2)}}class d{constructor(e){t(this,"game");t(this,"markedForDeletion");t(this,"x");t(this,"y");t(this,"speedX");t(this,"speedY");t(this,"size");this.game=e,this.markedForDeletion=!1}update(){this.x-=this.speedX+this.game.speed,this.y-=this.speedY,this.size*=.95,this.size<.5&&(this.markedForDeletion=!0)}}class P extends d{constructor(i,h,r){super(i);t(this,"size");t(this,"x");t(this,"y");t(this,"speedX");t(this,"speedY");t(this,"color");this.size=Math.random()*10+10,this.x=h,this.y=r,this.speedX=Math.random(),this.speedY=Math.random(),this.color="rgba(0,0,0,0.5)"}draw(i){i.beginPath(),i.arc(this.x,this.y,this.size,0,Math.PI*2),i.fillStyle=this.color,i.fill()}}class p extends d{constructor(i,h,r){super(i);t(this,"image");t(this,"size");t(this,"x");t(this,"y");t(this,"speedX");t(this,"angel");t(this,"va");this.image=document.getElementById("fire"),this.size=Math.random()*100+50,this.x=h,this.y=r,this.speedX=1,this.speedX=1,this.angel=0,this.va=Math.random()*.2-.1}update(){super.update(),this.angel+=this.va,this.x+=Math.sin(this.angel*10)}draw(i){i.save(),i.translate(this.x,this.y),i.rotate(this.angel),i.drawImage(this.image,-this.size*.5,-this.size*.5,this.size,this.size),i.restore()}}class C extends d{constructor(i,h,r){super(i);t(this,"size");t(this,"x");t(this,"y");t(this,"speedX");t(this,"speedY");t(this,"gravity");t(this,"image");this.size=Math.random()*100+100,this.x=h-this.size*.4,this.y=r-this.size*.5,this.speedX=Math.random()*6-4,this.speedY=Math.random()*2+1,this.gravity=0,this.image=document.getElementById("fire")}update(){super.update(),this.gravity+=.1,this.y+=this.gravity}draw(i){i.drawImage(this.image,this.x,this.y,this.size,this.size)}}const a={SITTING:0,RUNNING:1,JUMPING:2,FALLING:3,ROLLING:4,DIVING:5,HIT:6};class m{constructor(e,i){t(this,"state");t(this,"game");this.state=e,this.game=i}}class H extends m{constructor(e){super("SITTING",e)}enter(){this.game.player.frameX=0,this.game.player.frameY=5,this.game.player.maxFrame=4}handleInput(e){e.includes("ArrowLeft")||e.includes("ArrowRight")?this.game.player.setState(a.RUNNING,1):e.includes("Enter")&&this.game.player.setState(a.ROLLING,2)}}class V extends m{constructor(e){super("RUNNING",e)}enter(){this.game.player.frameX=0,this.game.player.frameY=3,this.game.player.maxFrame=8}handleInput(e){this.game.particles.unshift(new P(this.game,this.game.player.x+this.game.player.width*.5,this.game.player.y+this.game.player.height)),e.includes("ArrowDown")?this.game.player.setState(a.SITTING,0):e.includes("ArrowUp")?this.game.player.setState(a.JUMPING,1):e.includes("Enter")&&this.game.player.setState(a.ROLLING,2)}}class W extends m{constructor(e){super("JUMPING",e)}enter(){this.game.player.onGround()&&(this.game.player.vy-=30),this.game.player.frameX=0,this.game.player.frameY=1,this.game.player.maxFrame=6}handleInput(e){this.game.player.onGround()?this.game.player.setState(a.RUNNING,1):this.game.player.onGround()?e.includes("Enter")?this.game.player.setState(a.ROLLING,2):e.includes("ArrowDown")&&this.game.player.setState(a.DIVING,0):this.game.player.setState(a.FALLING,1)}}class J extends m{constructor(e){super("FALLING",e)}enter(){this.game.player.frameX=0,this.game.player.frameY=2,this.game.player.maxFrame=6}handleInput(e){this.game.player.onGround()?this.game.player.setState(a.RUNNING,1):e.includes("ArrowDown")&&this.game.player.setState(a.DIVING,0)}}class q extends m{constructor(e){super("ROLLING",e)}enter(){this.game.player.frameX=0,this.game.player.frameY=6,this.game.player.maxFrame=6}handleInput(e){this.game.particles.unshift(new p(this.game,this.game.player.x+this.game.player.width*.5,this.game.player.y+this.game.player.height*.5)),!e.includes("Enter")&&this.game.player.onGround()?this.game.player.setState(a.RUNNING,1):!e.includes("Enter")&&!this.game.player.onGround()?this.game.player.setState(a.FALLING,1):e.includes("Enter")&&e.includes("ArrowUp")&&this.game.player.onGround()?this.game.player.vy-=27:e.includes("ArrowDown")&&!this.game.player.onGround()&&this.game.player.setState(a.DIVING,0)}}class j extends m{constructor(e){super("Diving",e)}enter(){this.game.player.frameX=0,this.game.player.frameY=6,this.game.player.maxFrame=6,this.game.player.vy=15}handleInput(e){if(this.game.particles.unshift(new p(this.game,this.game.player.x+this.game.player.width*.5,this.game.player.y+this.game.player.height*.5)),this.game.player.onGround()){this.game.player.setState(a.RUNNING,1);for(let i=0;i<30;i++)this.game.particles.unshift(new C(this.game,this.game.player.x+this.game.player.width*.5,this.game.player.y+this.game.player.height))}else e.includes("Enter")&&this.game.player.onGround()&&this.game.player.setState(a.ROLLING,2)}}class K extends m{constructor(e){super("Hit",e)}enter(){this.game.player.frameX=0,this.game.player.frameY=4,this.game.player.maxFrame=10}handleInput(e){this.game.player.frameX>=10&&this.game.player.onGround()?this.game.player.setState(a.RUNNING,1):this.game.player.frameX>=10&&!this.game.player.onGround()&&this.game.player.setState(a.FALLING,1)}}class Q{constructor(e){t(this,"game");t(this,"width");t(this,"height");t(this,"x");t(this,"y");t(this,"vy");t(this,"weight");t(this,"image");t(this,"frameX");t(this,"frameY");t(this,"maxFrame");t(this,"fps");t(this,"frameInterval");t(this,"frameTimer");t(this,"speed");t(this,"maxSpeed");t(this,"states");t(this,"currentState");this.game=e,this.width=100,this.height=91.3,this.x=0,this.y=this.game.height-this.height-this.game.groundMargin,this.vy=0,this.weight=1,this.image=document.getElementById("player"),this.frameX=0,this.frameY=0,this.maxFrame=5,this.fps=20,this.frameInterval=1e3/this.fps,this.frameTimer=0,this.speed=0,this.maxSpeed=10,this.states=[new H(this.game),new V(this.game),new W(this.game),new J(this.game),new q(this.game),new j(this.game),new K(this.game)],this.currentState=null}update(e,i){this.checkCollision(),this.currentState.handleInput(e),this.x+=this.speed,e.includes("ArrowRight")&&this.currentState!==this.states[6]?this.speed=this.maxSpeed:e.includes("ArrowLeft")&&this.currentState!==this.states[6]?this.speed=-this.maxSpeed:this.speed=0,this.x<0&&(this.x=0),this.x>this.game.width-this.width&&(this.x=this.game.width-this.width),this.y+=this.vy,this.onGround()?this.vy=0:this.vy+=this.weight,this.y>this.game.height-this.height-this.game.groundMargin&&(this.y=this.game.height-this.height-this.game.groundMargin),this.frameTimer>this.frameInterval?(this.frameTimer=0,this.frameX<this.maxFrame?this.frameX++:this.frameX=0):this.frameTimer+=i}draw(e){this.game.debug&&e.strokeRect(this.x,this.y,this.width,this.height),e.drawImage(this.image,this.frameX*this.width,this.frameY*this.height,this.width,this.height,this.x,this.y,this.width,this.height)}onGround(){return this.y>=this.game.height-this.height-this.game.groundMargin}setState(e,i){this.currentState=this.states[e],this.game.speed=this.game.maxSpeed*i,this.currentState.enter()}checkCollision(){this.game.enemies.forEach(e=>{e.x<this.x+this.width&&e.x+e.width>this.x&&e.y<this.y+this.height&&e.y+e.height>this.y&&(e.markedForDeletion=!0,this.game.collisions.push(new B(this.game,e.x+e.width*.5,e.y+e.height*.5)),this.currentState===this.states[4]||this.currentState===this.states[5]?(this.game.score++,this.game.floatingMessages.push(new O("+1",e.x,e.y,150,50))):(this.setState(6,0),this.game.score-=5,this.game.lives--,this.game.lives<=0&&(this.game.gameOver=!0)))})}}class Z{constructor(e){t(this,"game");t(this,"fontSize");t(this,"fontFamily");t(this,"liveImage");this.game=e,this.fontSize=28,this.fontFamily="Creepster",this.liveImage=document.getElementById("lives")}draw(e){e.save(),e.font=this.fontSize+"px "+this.fontFamily,e.textAlign="left",e.fillStyle=this.game.fontColor,e.fillText("Score: "+this.game.score,20,50),e.font=this.fontSize*.8+"px "+this.fontFamily,e.fillText("Time: "+(this.game.time*.001).toFixed(1),20,80);for(let i=0;i<this.game.lives;i++)e.drawImage(this.liveImage,25*i+20,95,25,25);this.game.gameOver&&(e.textAlign="center",e.font=this.fontSize*2+"px "+this.fontFamily,this.game.score>this.game.winningScore?e.fillText("you win this game,your score is :"+this.game.score,this.game.width*.5,this.game.height*.5):e.fillText("not bad,your score is :"+this.game.score,this.game.width*.5,this.game.height*.5)),e.restore()}}class ${constructor(e,i){t(this,"width");t(this,"height");t(this,"groundMargin");t(this,"speed");t(this,"maxSpeed");t(this,"background");t(this,"player");t(this,"input");t(this,"ui");t(this,"enemies");t(this,"particles");t(this,"collisions");t(this,"floatingMessages");t(this,"maxParticles");t(this,"enemyInterval");t(this,"enemyTimer");t(this,"debug");t(this,"score");t(this,"fontColor");t(this,"time");t(this,"maxTime");t(this,"gameOver");t(this,"lives");t(this,"winningScore");this.width=e,this.height=i,this.groundMargin=80,this.speed=0,this.maxSpeed=3,this.background=new A(this),this.player=new Q(this),this.input=new b(this),this.ui=new Z(this),this.enemies=[],this.particles=[],this.collisions=[],this.floatingMessages=[],this.maxParticles=50,this.enemyInterval=1e3,this.enemyTimer=0,this.debug=!1,this.score=0,this.fontColor="black",this.time=0,this.maxTime=6e4,this.gameOver=!1,this.lives=5,this.winningScore=40,this.player.currentState=this.player.states[0],this.player.currentState.enter()}update(e){this.time+=e,this.time>this.maxTime&&(this.gameOver=!0),this.background.update(),this.player.update(this.input.keys,e),this.enemyTimer>this.enemyInterval?(this.addEnemy(),this.enemyTimer=0):this.enemyTimer+=e,this.enemies.forEach(i=>{i.update(e)}),this.floatingMessages.forEach(i=>{i.update()}),this.particles.forEach((i,h)=>{i.update()}),this.particles.length>this.maxParticles&&(this.particles.length=this.maxParticles),this.collisions.forEach((i,h)=>{i.update(e)}),this.enemies=this.enemies.filter(i=>!i.markedForDeletion),this.particles=this.particles.filter(i=>!i.markedForDeletion),this.collisions=this.collisions.filter(i=>!i.markedForDeletion),this.floatingMessages=this.floatingMessages.filter(i=>!i.markedForDeletion)}draw(e){this.background.draw(e),this.player.draw(e),this.enemies.forEach(i=>{i.draw(e)}),this.particles.forEach(i=>{i.draw(e)}),this.collisions.forEach(i=>{i.draw(e)}),this.floatingMessages.forEach(i=>{i.draw(e)}),this.ui.draw(e)}addEnemy(){this.speed>0&&Math.random()<.5?this.enemies.push(new z(this)):this.speed>0&&this.enemies.push(new Y(this)),this.enemies.push(new U(this))}}const ee=v('<canvas id="shadowDog" data-v-afc79e40></canvas><img src="'+_+'" alt="" id="player" data-v-afc79e40><img src="'+k+'" alt="" id="layer1" data-v-afc79e40><img src="'+F+'" alt="" id="layer2" data-v-afc79e40><img src="'+G+'" alt="" id="layer3" data-v-afc79e40><img src="'+D+'" alt="" id="layer4" data-v-afc79e40><img src="'+M+'" alt="" id="layer5" data-v-afc79e40><img src="'+N+'" alt="" id="enemy_fly" data-v-afc79e40><img src="'+L+'" alt="" id="enemy_plant" data-v-afc79e40><img src="'+X+'" alt="" id="enemy_spider_big" data-v-afc79e40><img src="'+E+'" alt="" id="fire" data-v-afc79e40><img src="'+T+'" alt="" id="collisionAnimation" data-v-afc79e40><img src="'+R+'" alt="" id="lives" data-v-afc79e40>',13),te=u({__name:"ShadowDog",setup(s){let e=null;return w(()=>{I(()=>{const i=document.getElementById("shadowDog"),h=i.getContext("2d");i.width=900,i.height=500,e=new $(i.width,i.height);let r=0;function g(o){const y=o-r;r=o,h.clearRect(0,0,i.width,i.height),e.update(y),e.draw(h),e.gameOver||requestAnimationFrame(g)}g(0)})}),x(()=>{e=null}),(i,h)=>ee}});const ae=S(te,[["__scopeId","data-v-afc79e40"]]);export{ae as default};
